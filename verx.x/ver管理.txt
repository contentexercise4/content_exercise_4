
ver管理

2019/06/25
ver1.9
TestEnviroment.cpp
6画面対応はできない.
ブタが一直線上に動いてくる
壁の衝突音・壁へのめり込み回避　実装済み
敵は壁にめり込む
BGMの無限ループ

2019/07/01
ver2.0
TMF_new.cpp
ブタの鳴き声の無限ループ実装済み
BGMの無限ループ実装済み
ブタと自分との距離を得てその距離に従って音の大きさを変えるのはまだ難しい
6画面対応はできるが、深度情報が曖昧
自分の壁へのめり込み防止は実装済み（ただし壁の向こうが透明になって見える）
敵は動かない
敵の壁へのめり込み制御も未実装

2019/07/04
ver2.1
りんごを4つ四隅に配置
床を４色
ブタが近づいてくる方向をテクスチャで可視化（表示のみ。制御はまだ）
リンゴの取得個数をテクスチャで可視化（表示のみ。制御はまだ）
自分は壁にめり込まない
ブタは動かない。ブタが壁にめり込むか否かは不明
BGM無限ループOK
ブタの鳴き声無限ループなぜかできない（コメントアウトかも）

2019/07/07
ver2.1.1
lib.hにselectEnviromentを追加
int selectEnviroment = MYPC
で, 手元のPC環境
int selectEnviroment = DIMENCO
で, Dimenco Display環境
に切り替えることができる.
それにともなって, main.cppの変数定義のところもMYPC or DIMENCO
で変数に代入する値が変更されるように条件分岐している
主にディスプレイサイズとカメラ操作の速さ, 主人公の移動の速さを変える

2019/07/07
ver2.2
ブタが近づいてくる
ブタが見えない壁にぶつかることがある.
壁を表すobjの個数が変わってverticesの初期化がおかしくなっていることが原因

2019/07/07
ver2.2.1
2.1.1と同様の機能追加

2019/07/07
ver2.3
今日の最終更新~
マップの変更
それに伴うリンゴの位置変更
アラートの実装

2019/07/07
ver2.3.1
ver2.2.1と同様
ブタが近づいてくるにつれて鳴き声が大きくなる
迷路全体を囲む毛紅当たり判定が消えてるバグを発見

2019/07/07
ver2.3.2
GameReset()を追加
ブタの初期配置はまだリセットできてないので要修正

2019/07/09
ver2.4
ブタ４匹を徘徊させる
1085行目でブタの速度変更（obj_speed)
333行目で上空から見下ろす視点にする(gluLookAt)
lib.h 331-339 ブタの移動ポイント設定

2019/07/09
ver2.4.1
・アイテムの取得音を実装
・BGMをリザルト画面含めて遷移(バグあり)
・GameReset()により主人公の位置が初期一に戻る. ブタは戻らない
・6画面対応用の画面サイズやスピードと手元のPCで遊ぶ（開発テストする）用の画面サイズとスピードをenumのMYPC or DIMENCOで選択可能

☆ブタの鳴き声を停止(999行目の decideVolumeOfPigCry() をコメントアウト)
<理由>
・アイテムの取得音が鳴らなくなる
・画面遷移時のBGMにバグが生じる
いずれも原因不明

2019/07/09
ver2.5
PlayMode()内のオブジェクトの表示部を関数にまとめる
具体的には
void Wall();
void Floor();
void TimeLimit();
void NumOfApple();
void Pig();
void DirectionOfPig();
void Apple();
void Sky();
にまとめた.

2019/07/09
ver2.6
[lib_ver2.6.h]
☆ 難易度選択時に使用する enum DegreeOfDifficultyを追加
lib.h内の宣言部を整理

[TMF_ver2.6.cpp]
☆ STRAT画面から難易度を選択可能となった. START画面で押せるキーは以下の通り
E  : EASY
N  : NORMAL
H  : HARD
F7 : 今まで通り(NORMAL)

☆ void selectDegreeOfDifficulty(int dod)
1157〜1176行目
難易度選択関数を追加. START画面で押されたキーに従って作動
難易度は以下の通り
EASY
	ブタのスピード=0.003
	ブタが追いかけてこない
NORMAL
	ブタのスピード=0.005
	ブタが追いかけてくる
HARD
	ブタのスピードは0.005
	リンゴを取るたびにブタのスピードが0.001大きくなる
	ブタが追いかけてくる

☆ void Keyboard(unsigned char key, int x, int y)
501〜526行目 : 難易度選択処理を追加

☆ void setPigSpeed(double pig_speed)
1178〜1183行目
ブタの速さを引数の数字にセットする

☆ void changePigSpeed(double change_pig_speed)
ブタの速さを引数分だけ増減する. まだ使う予定はない


2019/07/10
ver2.6
Newwall.obj
Newwall.mtl
一番大きい壁のテクスチャがよりマシな感じになった
[lib_ver2.7.h]
☆ double disFromPig2
☆ bool pigNoticeFlag[4]
を追加

[TMF_ver2.7.cpp]
☆ void moveOBJ()
755行目〜：//--主人公の座標を制御--// の部分で周りの壁との当たり判定をごり押し実装

☆ void Initialize()
104行目：disOfNoticePigの値を調整
15→12に. これは後述する豚の認知器官の仕様変更の影響であり, 減らしたのには意味があるけど12なのはなんとなく. 
この数字を難易度変更で変えるのも面白そう

☆ void DirectionOfPig()
1499行目〜1575行目：豚が聴覚(嗅覚?)で追いかけてきてたのが視覚で追いかけてくるようになった
アルゴリズムとしては、豚の現在座標を中心とした円の中に入ったら追いかけられてたのが, 
豚の座標+進行方向に「5」くらいの数字を足した座標を中心とした円の中に入ったら追いかけられるようになった. 
これにより豚の向いている方向からでは見つかりやすく, 後ろからならそれなりに近づいても気づかれないようになってゲームらしさが増した. 

2019/07/15
ver2.8.1
りんごが近くにある時にアラートが表示される
壁のテクスチャを変更
壁のテクスチャの引き延ばしを修正
DIMENCO用のカメラを追加

☆問題点
DIMENCO用にブタの速さを大きくするとブタが近づいてかなくなる
disFromPIg2がおそらく原因

2019/07/15
ver2.9.0
ブタの鳴き声を鳴らすとほかの音が止まったりするもろもろのバグを修正
2277行目 void soundStop(ALuint *source)
内で, 何かの音楽を止めるたびにSEの音源バッファを作り直してみた
メモリ食ってないか心配

2019/07/16
ver3.0.0
ゲームクリア、ゲームオーバー、タイムアップの表示を追加

2019/07/16
ver3.0.1
DIMENCOのときの豚の視界を修正
DIMENCOのときのHARDにおける豚の速度増加を調整
1696行目 if(..){
disFromPig2 = ... 
}
1288行目 change_obj_speed = 0.005;

2019/07/16
ver3.0.2
ゲームオーバーとかの表示時に空を消してちゃんと見えるように変更

2019/07/16
ver3.0.3
void GameReset()
リセット時に豚の座標と空のフラグを戻すようにした

2019/07/16
ver3.0.4
bool objhit2
OBJMove
左の壁消失バグ修正


2019/07/16
ver3.0.5
void decideCube(std::vector<glm::vec3> &vertices) {
sizeを使って壁に突き進んだ時の透視を解消